{% extends "base.html" %}

{% load i18n %}

{% block head %}
    <title>Conexões - Gourmet Avenida</title>
{% endblock %}

{% block main %}
<h1>{% trans "Account Connections" %}</h1>

{% if form.accounts %}
    <p class="lead">Você pode entrar usando uma das seguintes contas sociais:</p>

    <form method="post" action="{% url 'socialaccount_connections' %}">
        {% csrf_token %}
        <fieldset>
        {% if form.non_field_errors %}
            <div id="errorMsg">{{ form.non_field_errors }}</div>
        {% endif %}

        {% for base_account in form.accounts %}
            {% with base_account.get_provider_account as account %}
                <div class="form-check p-2">
                    <label for="id_account_{{ base_account.id }}">
                        <input id="id_account_{{ base_account.id }}" type="radio" name="account" value="{{ base_account.id }}" class="form-check-input"/>
                        <span class="socialaccount_provider {{ base_account.provider }} {{ account.get_brand.id }}">{{ account.get_brand.name }}</span>
                        {{ account }}
                    </label>
                </div>
            {% endwith %}
        {% endfor %}

        <div>
            <button type="submit" class="btn btn-danger">{% trans 'Remove' %}</button>
        </div>

        </fieldset>
    </form>

{% else %}
    <p class="lead">No momento não há nenhuma conta social conectada a esta conta.</p>
{% endif %}

<h2 class="fs-4 pt-4">Adicionar uma Conta Social</h2>
<p class="lead">
    As contas sociais são conectadas automaticamente ao entrar pelo Google, ou ao se cadastrar
    no site e depois entrar pelo Google com o email correspondente.
</p>

<ul class="socialaccount_providers w-50" style="list-style: none;">
    {% include "socialaccount/snippets/provider_list.html" with process="connect" %}
</ul>

{% include "socialaccount/snippets/login_extra.html" %}

{% endblock %}
